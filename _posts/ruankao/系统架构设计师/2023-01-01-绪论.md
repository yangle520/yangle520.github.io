---
layout: post
title: 系统架构设计师教程 - 1 - 绪论
subtitle: 绪论
date:   2024-05-01 00:00:00
categories: 软考 系统架构设计师教程
tag: 软考
author: YangLe
---



系统架构设计师（System Architecture Designer）是项目开发活动中的关键角色之一。

系统架构是系统的一种整体的高层次的结构表示，是系统的骨架和根基，其决定了系统的健壮性和生命周期的长短。本章首先从架构定义、发展历程、典型架构和未来发展等方面概要说明，给读者建立一个架构的整体概念；然后对系统架构设计师的定义、职责、范围和工作内容等进行讲解，并说明了对于一名合格的系统架构师的要求。



## 一、系统架构概述

冯诺依曼提出了 **离散变量自动电子计算机**（EDVAC），它由运算器、控制器、存储器、输入和输出设备组成。采用二进制运算。控制计算机运行的程序存放在存储器中，可以自动地从一个程序指令转入下一个程序指令。

冯诺依曼的思想是电子计算机发展史上的里程碑，当今计算机都是依据这一理论制造的，也被称为冯诺依曼结构计算机。

从冯诺依曼机构计算机起，计算机被分解成计算机硬件和计算机软件两部分，并逐步促进了计算机硬件系统和软件系统的发展。

如果在搭建系统时未能设计出优良的结构，势必对系统的可靠性、安全性、可移植性、可扩展性、可用性和可维护性等方面产生重大影响。因此，系统架构（System Architecture）是系统的一种整体的高层次的结构表示，是系统的骨架和根基，也决定了系统的健壮性和生命周期的长短。

系统架构师师项目的总设计师：

- 既需要掌控整体，又需要洞悉局部瓶颈，并依据具体的业务场景给出解决方案
- 要确认和评估系统需求，给出开发规范，搭建系统实现的核心架构，澄清技术细节、扫清主要难点
- 要掌握技术团队的能力需要，给出项目管理方法，采用合适生命周期模型，具备以自身为核心形成团队能力
- 在项目进度计划和经费分配等方面开展评估，以预防项目风险

要成为一名系统架构设计师就应该精通专业基础知识，具备丰富的实际工作经验，具有跨学科能力和把握系统整体设计的能力。



### 1 系统架构的定义及发展历程

#### 1.1 系统架构的定义

系统架构 是系统的一种整体的高层次的结构表示，是系统的骨架和根基，支撑和链接各个部分，包括组件、连接件、约束规范以及指导这些内容设计与演化的原理，它是刻画系统整体抽象结构的一种手段。系统架构设计的目的是对需要开发的系统进行一系列相关的抽象，用于指导系统各个方面的设计与实现，架构设计在系统开发过程中起着关键性作用，架构设计的优劣决定了系统的健壮性和生命周期的长短。

我们通常把架构设计作为系统开发过程中需求分析阶段后的一个关键步骤，也是系统设计前的不可或缺工作要点之一，架构设计的作用主要包括以下几点：

- 解决相对复杂的需求分析问题
- 解决非功能属性在系统占据重要位置的设计问题
- 解决生命周期长、扩展性需求高的系统整体结构问题
- 解决系统基于组件需要的集成问题
- 解决业务流程再造难得问题

系统架构设计是成熟系统开发过程中的一个重要环节，它不仅是连接用户需求和系统进一步设计与实现的桥梁，也是系统早期阶段质量保证的关键步骤。

#### 1.2 发展历程

##### 1.2.1 基础研究阶段

从20世纪80年代起，为应对大型软件开发中存在的危机，对软件结构进行描述的方法开始在大型软件开发过程中广泛应用，并在实践中积累了大量经验，逐步形成了以描述软件高层次结构为目标的体系，形成了软件架构的雏形，随着软件规模的增大，模块化开发方法已被逐步采用，为后续软件架构的发展奠定了基础。

模块化开发方法是指把一个待开发的软件分解成若干个小的而且简单的部分，采用对复杂事务分而治之的经典原则。模块化开发方法涉及的主要问题是模块设计的规则，即系统如何分解成模块。而每一个模块都可独立开发与测试，最后再组装成一个完整软件。

对一个规约进行分解，以得到模块系统结构的方法有：数据结构设计法、功能分解法、数据流设计、面向对象设计等。将系统分解成模块时，应该遵循以下原则：

1. 最高模块内聚。也就是在一个模块内部的元素最大限度的关联，只实现一种功能的模块时高内聚的，具有三种以上功能的模块则是低内聚的。
2. 最低耦合。也就是不同模块之间的关系尽可能弱，以利于软件的升级和扩展。
3. 模块大小适度。颗粒过大会造成模块内部维护困难，而颗粒过小又会导致模块间的耦合增加。
4. 模块调用链的深度（嵌套层次）不可过多。
5. 接口简单、精炼（扇入扇出数不宜过大），且有信息隐蔽能力
6. 尽可能地复用已有模块

模块化思想推动了软件架构的快速发展：

- 一方面通过抽象、封装、分解、层次化等基本科学方法，对各种软件和软件应用进行打包，提高对企业现有资产的重用水平和能力
- 另一方面，基于模块化思想，业界提出了面向对象服务架构（Service-Oriented Architecture，SOA）思想，它提供一组基于标准化的方法和技术，通过有效整合和重用现有的应用系统和各种资源实现服务组件化，并基于服务组件 实现各种新业务应用的快速组装，帮助企业更好的应对业务的灵活性要求。

这样，通过有效平衡业务的灵活性和 IT 的复杂度，为开发者提供了新的视角，有效拉近了 IT 和业务的距离。

传统MIS系统软件架构：

![图片]({{ '/images/ruankao/framework/传统MIS系统软件架构.png' | prepend: site.baseurl }})



##### 1.2.2 概念体系和核心技术形成阶段 

2000年，IEEE 1471-2000标准的发布 第一次定义了软件架构的形式化标准。这标志着软件架构理论体系已基本建立，并已具备普及应用的基础。这一阶段最重要的成果之一就是软件组件化技术。

- 通常，组件具有可组装性和可拔插性
- 每个组件的运行仅依赖于平台或者容器
- 组件与组件之间不存在直接的耦合关系，同时组件和组件之间又并非绝对独立
- 组件经过组装后可以与其他组件进行业务上的交互

组件化开发并不等同于模块化开发，模块化开发只是在逻辑上做了切分，物理上（代码）通常并没有真正意义上的隔离。组件化也不等同于应用集成，应用集成式将一些基于不同平台或不同方案的应用软件有机地集成到一个无缝的、并列的、易于访问的单一系统中，以建立一个统一的综合应用。组件化比模块更独立，但比应用集成结合得更加紧密。



##### 1.2.3 理论体系完善与发展阶段

随着基于组件软件架构理论的建立，与之相关的一些研究方向逐渐成为软件工程领域的研究重点，主要包括：

###### （1）软件架构描述与表示

目前存在多种软件架构描述语言：

- 比较典型的事基于组件和消息的软件架构描述语言 C2SADL；
- 分布、并发类型的架构描述语言 Wright；
- 架构互换语言 ACME；
- 基于组件和连接的架构描述语言 Unicon；
- 基于事件的架构描述语言 Rapide；
- 以及其他的 Darwin、MetaH、Aesop、Weaves、SADL、xADL 等

###### （2）软件架构分析、设计、测试

架构分析的内容可分为结构分析、功能分析、非功能分析。分析的目的是系统被实际构造之前预测其质量属性。

架构分析常用的方法有：

- 软件架构分析方法 SAAM
- 架构权衡分析法 ATAM
- 成本效益分析法 CBAM
- 基于场景的架构再工程 SBAR
- 架构层次的软件可维护性预测 ALPSM
- 软件架构评估模型 SAEM 
- ...

架构设计是指生成一个满足用户需求的软件架构过程。架构设计常用的方法有：

- 工件驱动（artifact-driven）：从工件描述中提取架构描述
- 用例驱动（use-case-driven）：从用例导出架构抽象
- 模式驱动（pattern-driven）：从模式导出架构抽象
- 领域驱动（domain-driven）：从领域模型导出架构抽象
- 属性驱动设计（attribute-driven design）：从设计过程中获得架构质量属性需求

架构测试着重于仿真系统模型、解决架构层的主要问题。由于测试的抽象层次不同，架构测试策略分为单元、子系统、集成和验收测试等阶段的测试策略。测试方法主要包括架构测试覆盖方法、组件设计正确性验证方法和基于CHAM的架构动态语义验证方法等。

###### （3）软件架构发现、演化、重用

软件架构发现 解决如何从已经存在的系统中提取软件架构的问题，属于逆向工程。Waters等人提出了一种迭代式架构发现过程。

软件架构演化 即由于系统需求、技术、环境和分布等因素的变化而最终导致软件架构的变动。软件系统在运行时刻的架构变化称为架构动态性，而将架构的静态修改称为架构扩展。架构扩展和动态性都是架构适应性和演化的研究范畴。

软件架构复用属于设计重用，比代码重用更抽象。架构模式就是架构复用的一种成果。

###### （4）基于软件架构的开发方法

软件开发模型是跨越整个软件生存周期的系统开发、运行和维护所实施的全部工作和任务的结构框架，给出了软件开发活动各个阶段之间的关系。通常软件开发模型可分为三种：

- 以软件需求完全确认为前提得瀑布模型
- 在软件开发初期只能提供基本需求为前提得渐进式开发模型（如螺旋模型）
- 以形式化开发方法为基础的变换模型

###### （5）软件架构风格

架构风格（架构模式）是针对给定场景中经常出现的问题提供的一般性可重用方案，它反映了领域中众多系统所共有的结构和语义特征，并指导如何将各个模块盒子系统有效的组成一个完整的系统。

通常，将软件架构风格分成主要五类：

- 数据流风格
- 调用/返回风格
- 独立组件风格
- 虚拟机风格
- 仓库风格



##### 1.2.4 普及应用阶段

软件架构是软件生命周期中的重要产物，它影响软件开发的各个阶段：

- 需求阶段：把软件架构有的概念引入需求分析阶段，有助于保证需求规约和系统设计之间的可追踪性和一致性
- 设计阶段：设计阶段是软件架构研究关注最早、最多的阶段，这一阶段的软件架构主要包括软件架构的描述、软件架构模型的设计与分析以及对软件架构设计经验的总结与复用等
- 实现阶段：将设计阶段设计的算法及数据类型用程序设计语言进行表示，满足设计、架构和需求分析的要求，从而得到满足设计需求的目标系统
- 维护阶段：为了保证软件具有良好的维护性，在软件架构中针对维护性目标进行分析时，需要对一些有关维护性的属性（如可扩展性、可替换性）进行规定，当架构经过一定的开发过程实现和形成软件系统时，这些属性也相应地反映了软件的维护性

纵观软件架构的发展历程，其完成了由实践上升到理论，再由理论反馈指导实践的过程，理论与实践均处于健康发展中，已经形成良性发展循环。



### 2 软件架构的常用分类及建模方法

#### 2.1 软件架构的常用分类

架构 概念经过不断演化，目前已形成了满足不同用途的架构模式，比较典型的架构模型包括：**分层架构**、**事件驱动架构**、**微核架构**、**微服务架构**、**云架构** 等五类。（像 C/S、B/S、管道-过滤器、PAC等架构也是被广泛使用的软件架构，本节简要说明典型架构内涵）



##### 2.1.1 分层架构

分层架构（Layered Architecture）是最常见的软件架构，也是事实上的标准架构。这种架构将软件分成若干个水平层，每一层都有清晰的角色和分工，不需要知道其他层的细节。层与层之间通过接口进行通信。分层架构通常明确约定软件一定要分成多少层，但是，最常见的是四层结构：

![图片]({{ '/images/ruankao/framework/分层架构.png' | prepend: site.baseurl }})

- 表现层（Presentation Layer）：用户界面，负责视觉和用户互动
- 业务层（Business Layer）：实现业务逻辑
- 持久层（Persistence Layer）：提供数据，SQL语句就放在这一层
- 数据库（Database Layer）：保存数据

有的项目在逻辑层和持久层之间加了一个服务层（Service），提供不同业务逻辑需要的一些通用接口。用户的请求将依次通过这四层的处理，不能跳过其中任何一层。



##### 2.1.2 事件驱动架构

事件（Event）是状态发生变化时软件发出的通知。事件驱动架构（Event-driven Architecture）是通过事件进行通信的软件架构，它分层四个部分：

![图片]({{ '/images/ruankao/framework/事件驱动架构.png' | prepend: site.baseurl }})

- 事件队列（Event Queue）：接收事件的入口
- 分发器（Event Mediator）：将不同的事件分发到不同的业务逻辑单元
- 事件通道（Event Channel）：分发器与处理器之间的联系渠道
- 事件处理器（Event Processor）：实现业务逻辑，处理完成后会发出事件，触发下一步操作

对于简单的项目，事件队列、分发器和事件通道可以合为一体，整个软件就分成事件代理和事件处理器两部分。



##### 2.1.3 微核架构

微核架构（Microkernel Architecture）又称为插件架构（Plug-in Architecture），是指软件的内核相对较小，主要功能和业务逻辑都通过插件实现。

![图片]({{ '/images/ruankao/framework/微核架构.png' | prepend: site.baseurl }})

- 内核（Core）通常只包含系统运行的最小功能。
- 插件是相互独立的，插件之间的通信应该减少到最低，避免出现互相依赖的问题



##### 2.1.4 微服务架构

微服务架构（Microservices Architecture）是服务导向架构（Service-Oriented Architecture，SOA）的升级。每一个服务就是一个独立的部署单元（Separately Deployed Unit）。这些单元都是分布式的，互相解耦，通过远程通信协议（比如：REST、SOAP）联系。

![图片]({{ '/images/ruankao/framework/微服务架构.png' | prepend: site.baseurl }})

微服务架构分成三种实现模式：

- RESTful API模式：服务通过API提供，云服务就属于这一类
- RESTful 应用模式：服务通过传统的网络协议或者应用协议提供，背后通常是一个多功能的应用程序，常见于企业内部
- 集中消息模式：采用消息代理（Message Broker）可以实现消息队列、负载均衡、统一日志、异常处理，但缺点是会出现单点失败，消息代理可能要做成集群。



##### 2.1.5 云架构

云架构（Cloud Architecture）主要解决扩展性和并发问题，是最容易扩展的架构。

它的高扩展性体现在将数据都复制到内存中，变成可复制的内存数据单元，然后将业务处理能力封装成一个个处理单元（Processing Unit）。若访问量增加，就新建处理单元；若访问量减少，就关闭处理单元。由于没有中央数据库，所以扩展性的最大瓶颈消失了。由于每个处理单元的数据都在内存里，需要进行数据持久化。

云架构主要分成两部分：处理单元（Processing Unit）和虚拟中间件（Virtualized Middleware）。

![图片]({{ '/images/ruankao/framework/微服务架构.png' | prepend: site.baseurl }})

- 处理单元：实现业务逻辑
- 虚拟中间件：负责通信、保持会话控制、数据复制、分布式处理和处理单元的部署。包含以下四个组件：
  - 消息中间件（Messaging Grid）：管理用户请求和会话控制（sessions），当一个请求进来以后，它决定分配给哪一个处理单元
  - 数据中间件（Data Grid）：将数据复制到每一个处理单元，即数据同步。保证某个处理单元都得到同样的数据。
  - 处理中间件（Processing Grid）：可选，如果一个请求涉及不同类型的处理单元，该中间件负责协调处理单元。
  - 部署中间件（Deployment Manager）：负责处理单元的启动和关闭，监控负载和响应时间，当负载增加，就新启动处理单元，负载减少，就关闭处理单元



#### 2.2 系统架构的重用建模方法

架构师在进行软件架构设计时，必须掌握软件架构的表示方法，即如何对软件架构建模。根据建模的侧重点的不同，可以将软件架构的模型分成4种：**结构模型**、**框架模型**、**动态模型**、**过程模型**。

- **结构模型**：这是一个最直观、最普遍的建模方法。此方法以架构的构件、连接件和其他概念来刻画结构。并力图通过结构来反映系统的重要语义内容，包括：系统的配置、约束、隐含的假设条件、风格和性质。研究结构模型的核心是架构描述语言。
- **框架模型**：框架模型与结构模型类似，但它不太侧重描述结构的细节，而更侧重整体的结构。框架模型主要以一些特殊的问题为目标建立只针对和适应问题的结构。
- **动态模型**：动态模型是对结构或框架模型的补充，主要研究系统的**大颗粒**行为的性质。例如：描述系统的重新配置或演化。这里的动态可以是指 系统总体结构的配置、建立或拆除通信或计算的过程，这类系统模型常是激励型的。
- **过程模型**：过程模型是研究构造系统的步骤和过程，其结构是遵循某些过程脚本的结果。

上述介绍的4种模型并不是完全独立的，通过有机的结合才可形成一个完整的模型来刻画软件架构，也将能更加准确、全面地反映软件架构。

软件架构可从不同角度来描述用户所关心架构的特征。Philippe Kruchten 在1995年提出了一个 4+1 视角模型。4+1 模型从5个不同的视角来描述软件架构，包括的视角有： **逻辑**（Logical）、**过程**（Process）、**物理**（Physical）、**开发**（Development）、**场景**（Scenarios）。每一个视角只关心系统的一个侧面，5个视角结合在一起才能够反映系统的软件架构的全部内容。



### 3 软件架构的应用场景

不同的架构风格具有各自的优缺点和应用场景：

- **管道-过滤器风格** 适用于将系统分成若干个独立的步骤
- **主程序/子系统** 和 **面向对象的架构风格**  可用于对组件内部进行设计
- **虚拟机风格** 经常用于构造解释器或专家系统
- **C/S** 和 **B/S** 风格 适合于数据和处理分布在一定范围，通过网络连接构成系统
- **平台/插件风格** 适用于具有插件扩展功能的应用程序
- **MVC风格** 被广泛地应用于用户交互程序的设计
- **SOA风格** 应用在企业集成等方面
- **C2风格** 适用于GUI软件开发，用以构建灵活和可扩展的应用系统

对于现代大型软件，很少使用单一的架构风格进行设计与开发，而是混合多种风格，从不同视角描述大型软件系统的能力，并可保证软件系统的可靠性、可扩展性、可维护性等非功能属性的正确描述。



### 4 软件架构的发展未来

从20世纪40年代出现编程算法算起，软件架构及相关技术经历了70余年的发展，其中关键的技术如图所示：

![图片]({{ '/images/ruankao/framework/软件架构技术发展路线概览.png' | prepend: site.baseurl }})

架构发展的主线可以归纳为 模块化编程/面向对象编程、构件技术、面向服务开发技术、云技术。这些阶段一方面引起了软件开发方法的演变，另一方面引发了领域工程相关技术的广泛应用。



