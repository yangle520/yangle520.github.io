---
layout: post
title: 系统架构设计师教程 - 2
subtitle: 计算机系统基础知识
date:   2023-01-02 00:00:00
categories: 软考 系统架构设计师教程
tag: 软考
author: YangLe
---





## 一、计算机系统概述

### 1 定义

**计算机系统（Computer System）是指用于数据管理的计算机硬件、软件及网络组成的系统**。

### 2 组成

它是按人的要求接收和存储信息，自动进行数据处理和计算，并输出结果信息的机器系统。由硬件子系统和软件子系统组成的系统，简称为计算机。而将连接多个计算机以实现计算机间数据交换能力的网络设备，则称之为计算机网络，简称网络。

计算机系统可划分为硬件和软件。

硬件由机械、电子元器件、磁介质、光介质等物理实体构成，包含以下组成部分：

- 处理器（运算单元、控制单元）
- 存储器（主存/内存，外存）
- 输入设备（鼠标、键盘等）
- 输出设备（显示器等）

软件系统分为：

- 系统软件：支持应用软件的运行，为用户开发应用软件提供平台支撑的软件（操作系统、编译工具等）
- 应用软件：是指计算机用户用户利用计算机软、硬件资源为某一专门的应用目的而开发的软件（办公软件、娱乐软件）

### 3 分类

计算机系统的分类维度很多，也较为复杂，可以从硬件的结构、性能、规模上划分，亦可从软件的构成、特征上划分，或者从系统的整体用途、服务对象等进行分类。

#### 3.1 嵌入式计算机

- 电信设备：基站、网络交换、移动终端
- 家用电子设备：视听设备、厨卫电器
- 可穿戴电子设备
- 医疗设备
- 交通设备
- 国防设备
- 金融设备

#### 3.2 通用计算机

- 个人计算机：台式电脑、平板电脑
- 网络服务器：云存储、云计算
- 超级计算机





## 二、计算机硬件

### 1 计算机硬件组成

计算机组成结构（Computer Architecture）源于冯诺依曼计算机结构，该结构成为现代计算机系统发展的基础。冯诺依曼计算机结构将计算机硬件划分为5部分，但在现实的硬件构成中，控制单元和运算单元被集成为一体，封装为通常意义上的处理器（但处理器并不只有上述两部分）；输入设备和输出设备则经常被设计者集成为一体，按照传输过程被划分为总线、接口、外部设备。下面按照处理器、存储器、总线、接口、外部设备进行阐述。



### 2 处理器

处理器（Central Processing Unit，CPU）作为计算机系统运算和控制的核心部件，经历了长期演化过程

- 在位宽上由4位处理器发展到64位处理器；
- 在能力构成上从仅具有运算和控制功能发展到集成多级缓存、多种通信总线和接口
- 在内核上从单核处理器发展为多核、异构多核、众核处理器

处理器的指令集按照其复杂程度可分为：**复杂指令集**（Complex Instruction Set Computers，CISC）与 **精简指令集**（Reduced Instruction Set Computers，RISC）两类。CISC 以 Intel 、AMD 的 x86 CPU 为代表，RISC 以 ARM 和 Power 为代表。随着研究的深入，除了由于历史原因而仍然存在的 CISC 结构外，RISC 已经成为计算机指令集发展的趋势，几乎所有后期出现的指令集均为 RISC 架构。

![图片]({{ '/images/ruankao/framework/2/典型的处理器体系结构示意图.png' | prepend: site.baseurl }})

**指令部件** 通过 MMU-Cache 的存储结构，从 **内存** 等存储设备中取得相应的 **软件代码指令** 并完成 **译码** 和 **控制** 操作，控制 **存取部件** 从 **存储设备** 中取得新的**数据**，控制 **寄存器组** 为 **运算器** 准备有关寄存器**数据**，并准备好 **结果寄存器**，控制整型、浮点、向量等 **运算部件** 开展运算。运算部件、寄存器单元、存取部件 将执行结果通知 **完成部件**，并在 **完成部件** 中完成结果的排队，由 **完成部件** 向 **指令部件** 反馈执行结果，控制 **指令** 的顺序执行、跳转等时序。

随着微电子技术发展，用于专用目的的处理器芯片不断涌现。常见的有：

- 图像处理器（Graphics Processing Unit，GPU）：一种特殊类型的处理器，具有数百或数千个内核，经过优化可并行运行大量计算。在深度学习和机器学习领域得到了广泛应用。
- 信号处理器（Digital Signal Processor，DSP）：专用于实时的数字信号处理，通过采用饱和算法处理溢出问题，通过乘积累加运算提高矩阵运算的效率，以及傅里叶变换设计专用指令等方法，在各类高速信号采集的设备中得到广泛应用。
- 可编程逻辑门阵列（Field Programmable Gate Array，FPGA）



### 3 存储器

存储器是利用半导体、磁、光等介质制成用于存储数据的电子设备。根据存储器的硬件结构可分为 SRAM、DRAM、NVRAM、Flash、EPROM、Disk 等。

计算机系统中的存储器通常采用分层的体系（Memory Hierarchy）结构，按照与处理器的物理距离可分为：

1. 片上缓存：在处理器核心中直接集成的缓存，一般为 SRAM 结构，实现数据的快速读取。它的容量较小，一般为16 ~ 512 KB，按照不同的设计可能划分为一级或二级
2. 片外缓存：在处理器核心外的缓存，需要经过交换互联开关访问，一般也是由 SRAM 构成，容量较片上缓存略大，可以为 256KB ~ 4MB。按照层级被称为 L2Cache 或 L3Cache，或者称为平台Cache（PlatformCache）。
3. 主存（内存）：通常采用 DRAM 结构，以独立的部件/芯片存在，通过总线与处理器连接。DRAM 依赖不断充电维持其中的数据，容量在数百MB至数十GB之间。
4. 外存：可以是磁带、磁盘、光盘和各类Flash 等介质器件，这类设备访问速度慢，但是容量大，且在掉电后能够保持其数据。

| 外存介质类型 | 容量         | 保存数据年限 |
| ------------ | ------------ | ------------ |
| Nor Flash    | MB级别       | 10年左右     |
| 磁盘         | GB ~ TB 级别 | 10年以上     |
| 磁带         |              | 30年以上     |



### 4 总线

总线（Bus）是指计算机部件间遵循某一特定协议实现数据交换的形式，即以一种特定格式按照规定的控制逻辑实现部件间的数据传输。

按照总线在计算机中所处的位置划分为内总线、系统总线、外部总线。

- 内总线：用于各类芯片内部互联，也可称为片上总线（On-Chip Bus）或 片内总线。
- 系统总线：是指计算机中 CPU、主存、I/O 接口的总线。
  - 狭义上：系统总线仍为CPU、主存、通信桥连接的总线
  - 广义上：还包括计算机系统内，经由系统总线再次级联的总线，常被称为局部总线（Local Bus）。
- 外部总线：是计算机板和外部设备之间，或者计算机系统直接互联的总线，又称为通信总线。

总线之间通过**桥**（Bridge）实现连接，它是一种特殊的外设，主要实现总线协议间的转换。总线的性能指标常见的有总线带宽、总线服务、质量QoS、总线时延、总线抖动等。

目前，计算机总线存在许多种类，常见的有并行总线和串行总线。并行总线主要包括 PCI、PCle、ATA(IDE)等，串行总线主要包括 USB、SATA、CAN、RS-232、RS-485、RapidIO、以太网等。在一些专业领域中还定义了多种类型的总线，比如航空领域的 ARINC429、ARINC659、ARINC664、MIL-STD-1553B 等；工业控制领域的 CAN、IEEE1394、PCI、PCle、VME 等。



### 5 接口

接口是指同一计算机不同功能层之间的通信规则。计算机接口有多种，常见的包括：

- 显示类接口：HDMI、DVI 等
- 音频输入输出类接口：TRS、RCA、XLR 等
- 网络类接口：RJ45、FC 等
- PS/2 接口
- USB 接口
- SATA 接口
- LPT 打印机接口
- RS-232接口
- ...

此外，像离散量接口与 A/D 转换接口等这类接口一般属于非标准接口，是随需求而设计。

对于总线而言，一种总线可能存在多种接口，比如，以太网可以通过 RJ-45 或 同轴电缆 与之连接，PCle 总线则具有多种形态的接口实现连接。



### 6 外部设备

外部设备也称为外围设备，是计算机的非必要设备（但各类计算机必然会有一些）。现代计算机的外部设备种类日益丰富，包括所有的输入输出设备以及部分存储设备（即外存）。



## 三、计算机软件

### 1 计算机软件概述

#### 1.1 定义

**计算机软件**：是指计算机系统中的程序及其文档，是计算任务的处理对象和处理规则的描述。

- 计算任务：任何以计算机为处理工具的任务
- 处理对象：数据（如：数字、文字、图形、图像、声音等）或信息（数据及有关的含义）
- 处理规则：一般指处理的动作和步骤
- 文档：是为了方便于了解程序所需的阐述性资料

**软件系统**：是指在计算机硬件系统上运行的程序、相关的文档资料、数据 的集合。

计算机软件用来扩充计算机系统的功能，提高计算机系统的效率。



#### 1.2 分类

按照软件所起的作用和需要的运行环境的不同，通常将计算机软件分为系统软件和应用软件两大类。

##### 1.2.1 系统软件

系统软件：是为整个计算机系统配置的不依赖特定应用领域的通用软件。

系统软件对计算机系统的硬件和软件资源进行控制和管理，并为用户使用和其他应用软件的运行提供服务。根据系统软件功能的不同，可将其划分为：**操作系统**、**程序设计语言翻译系统**、**数据库管理系统**、**网络软件** 等。

##### 1.2.2 应用软件

应用软件：是指 为某类应用需要 或 解决某个特定问题 而设计的软件。如图形图像处理软件、财务软件、游戏软件、各种软件包等。

按照应用软件使用面的不同，可进一步把应用软件分为 专用的应用软件 和 通用的应用软件两类。



### 2 操作系统

操作系统是计算机系统的资源管理者。它包含对系统软件、硬件资源实施管理的一组程序，其首要作用就是通过 CPU 管理、存储管理、设备管理、文件管理 对各种资源进行合理地分配，改善资源的共享和利用程度，最大限度地发挥计算机系统的工作效率，提高计算机系统在单位时间内处理工作的能力。

操作系统是配置在计算机硬件上的第1层软件，它向下管理裸机及其中的文件，向上为其他的系统软件（汇编程序、编译程序、数据库管理系统等）和 大量应用软件提供支持，以及为用户提供方便使用系统的接口。



#### 2.1 组成

它们通常由 **操作系统内核**（Kernel） 和 **其他许多附加的配套软件** 所组成。

**操作系统内核**：是指能提供进程管理（任务管理）、存储管理、文件管理、设备管理 等功能的那些软件模块。

- 是操作系统中最基本的部分，用于为众多应用程序访问计算机硬件提供服务
- 对硬件设备进行了抽象，为应用软件提供了一套简洁、统一的接口（系统调用接口、应用程序接口API）
- 驻留在内存中，以 CPU 最高优先级运行，能执行 指令系统 中的特权指令
- 具有直接访问 各种外设 和 全部主存空间 的特权
- 负责对系统资源进行管理和分配

**其他配套软件** 包括：

- 图形用户界面程序
- 常用的应用程序 （日历、计算器、资源管理器、网络浏览器等）
- 实用程序 （任务管理器、磁盘清理程序、杀毒软件、防火墙等）
- 为支持 应用软件开发和运行 的各种软件构建（应用框架、编译器、程序库）



#### 2.2 作用

1. 管理计算机中运行的程序 和 分配各种软硬件资源
   - 资源分配 和 任务调度，避免冲突，保证程序正常有序的运行
   - 资源管理 主要包括：处理器管理、存储管理、文件管理、I/O 设备管理 等
2. 为用户提供友善的人机界面。使用户能够比较直观、灵活、有效地使用计算机
   - 通过多个窗口分别显示正在运行的各个程序的状态
   - 采用图标（icon）来形象地表示系统中的文件、程序、设备等对象
   - 利用鼠标活触摸屏控制光标移动，通过点击启动某个操作命令的执行，或通过拖动方式执行所需操作
3. 为应用程序的开发和运行提供一个高效率的平台。
   - 屏蔽了几乎所有的物理设备的技术细节，以规范、高效的方式（例如：系统调用、库函数）向应用程序提供有力支持。从而为开发和运行其他系统软件及各种应用提供了一个平台

除了上述3个方面的作用之外，操作系统还具有辅导用户操作（帮助功能）、处理软硬件错误、监控系统性能、保护系统安全等许多作用。有了操作系统，计算机才能成为一个高效、可靠、通用的数据处理系统。



#### 2.3 特征

##### 2.3.1 并发性

在多道程序环境下，并发性是指在一段时间内，宏观上有多个程序同时运行，但实际上在单 CPU 的运行环境，每一个时刻只有一个程序在执行。因此，从微观上来说，各个程序是交替、轮流执行的，如果计算机系统中有多个 CPU，则可将多个程序分配到不同 CPU 上实现并运行。

##### 2.3.2 共享性

共享是指操作系统中的资源（包括硬件资源、信息资源）可以被多个并发执行的进程（线程）共同使用，而不是被一个进程所独占。出于经济上的考虑，一次性向每个用户程序分别提供它所需的全部资源不但浪费，有时也是不可能的。现实的方法是让操作系统和多个用户程序共用一套计算机系统的所有资源，因此必然会产生共享资源的需要。

**共享资源的方式** 可以分为 **同时共享** 和 **互斥共享**。

##### 2.3.3 虚拟性

虚拟性是操作系统的一种管理技术，它是把物理上的一个实体变成逻辑上的多个对应物，或把物理上的多个实体变成逻辑上的一个对应物的技术。采用虚拟技术的目的是为用户提供易于使用且方便高效的操作环境。

##### 2.3.4 不确定性

在多道程序环境中，允许多个进程并发执行，但由于资源有限，在多数情况下进行的执行不是一贯到底的，而是“走走停停”。

例如：一个进程在 CPU 上运行一段时间后，由于 等待资源 或 某事发生，它被暂停执行，将 CPU 转让给另一个进程执行。系统中的进程何时执行，何时暂停，以什么样的速度向前推进，进程总共要花费多少时间执行才能完成，这些都是不可预知的。或者说该进程是以不确定的方式运行的，其导致的直接后果是程序执行结果可能不唯一。



#### 2.4 分类

##### 2.4.1 批处理操作系统

- 单道批处理操作系统：用户可以向系统提交多个作业，单道 的含义是指一次只有一个作业装入内存执行。作业由用户程序、数据、作业说明书（作业控制语言）3个部分组成。当一个作业运行结束后，随即自动调入同批的下一个作业，从而节省了作业之间的人工干预时间，提高了资源的利用率。
- 多道批处理操作系统：允许多个作业装入内存执行，在任意一个时刻，作业都处于开始点和终止点之间。每当运行中的一个作业由于输入/输出操作需要调用外部设备时，就把 CPU 交给另一个等待运行的作业，从而将主机与外部设备的工作由串行改变为并行，进一步避免了因主机等待外设完成任务而浪费宝贵的 CPU 时间。

多道批处理系统主要有3个特点：**多道**、**宏观上并行运行**、**微观上串行运行**。

##### 2.4.2 分时操作系统

分时操作系统中，一个计算机系统与多个终端设备连接。分时操作系统是将 CPU 的工作时间划分为许多很短的时间片，轮流为各个终端的用户服务。

分时系统主要有4个特点：**多路性**、**独立性**、**交互性**、**及时性**。

例如：一个带20个终端的分时系统，若每个用户每次分配一个50ms 的时间片，则每隔1s即可为所有的用户服务一遍。因此，尽管各个终端上的作业是断续进行的，但由于操作系统每次对用户程序都能做出及时响应，因此用户感觉整个系统均归其一人占用。

##### 2.4.3 实时操作系统

实时是指计算机对于外来信息能够以足够快的速度进行处理，并在被控制对象允许的时间范围内做出快速反应。实时系统对交互能力要求不高，但要求可靠性有保障。

实时系统分为 **实时控制系统** 和 **实时信息处理系统**。

- 实时控制系统：主要用于生产过程的自动控制。例如：数据自动采集、武器控制、火炮自动控制、飞机自动驾驶、导弹的制导系统等。
- 实时信息处理系统：主要用于实时信息处理，例如：飞机订票系统、情报检索系统等。

##### 2.4.4 网络操作系统

网络操作系统是使联网计算机能方便而有效地共享网络资源，为网络用户提供各种服务的软件和有关协议的集合。主要功能包括：

- 高效、可靠的网络通信
- 对网络中共享资源（在LAN中有硬盘、打印机等）的有效管理
- 提供电子邮件、文件传输、共享硬盘、打印机等服务
- 网络安全管理
- 提供互操作能力

一个典型的网络操作系统的特征包括 **硬件独立性** 和 **多用户支持** 等。

- 硬件独立性：是指网络操作系统可以运行在不同的网络硬件上，可以通过网桥或路由器与其他网络连接
- 多用户支持：应能同事支持多个用户对网络的访问，应对信息资源提供完全的安全和保护功能
- 支持网络实用程序及其管理功能：如系统备份、安全管理、容错、性能控制
- 多种客户端支持
- 提供目录服务：以单一逻辑的方式让用户访问位于世界范围内的所有网络服务和资源的技术
- 支持多种增值服务：如文件服务、打印服务、通信服务、数据库服务等

##### 2.4.5 分布式操作系统

分布式计算机系统是由多个分散的计算机经连接而成的计算机系统，系统中的计算机无主次之分，任意两台计算机可以通过通信交换信息。通常，为分布式计算机系统配置的操作系统称之为分布式操作系统。

分布式操作系统能直接对系统中的各类资源进行 动态分配和调度、任务划分、信息传输 协调工作，并为用户提供一个统一的界面与标准接口，用户通过这一界面实现所需要的操作和使用系统资源，使系统中若干台计算机相互协作完成共同任务，有效地控制协调诸任务的并行执行。

分布式操作系统是网络操作系统的更高级形式，它保持网络系统所拥有的全部功能，同时又有透明性、可靠性、高性能 等特性。

##### 2.4.6 微型计算机操作系统

微型计算机操作系统简称微机操作系统，常用的有 Windows、Mac OS、Linux。

##### 2.4.7 嵌入式操作系统

嵌入式操作系统运行在嵌入式智能设备环境中，对整个智能硬件以及它所操作、控制的各种部件装置等资源进行统一协调、处理、指挥、控制。其主要特点如下：

- **微型化**：从性能和成本角度考虑，希望占用的资源和系统代码量少，如内存少、字长短、运行速度有限、能源少（微小型电池）
- **可定制**：从减少成本和缩短研发周期考虑，要求嵌入式操作系统能运行在不同的微处理器平台上，能针对硬件变化进行结构与功能上的配置，以满足不同应用需要
- **实时性**：嵌入式操作系统主要应用于过程控制、数据采集、传输通信、多媒体信息及关键要害领域
- **可靠性**：系统构件、模块、体系结构必须达到应有的可靠性，对关键要害应用还要提供容错和防故障措施
- **易移植性**：为了提高系统的易移植性，通常采用 **硬件抽象层**（Hardware Abstraction Level，HAL）和 **板级支撑包**（Board Support Package，BSP）的底层设计技术

常见的嵌入式实时操作系统有 VxWorks、μClinux、PalmOS、WindowsCE、μC/OS-II I和 eCos 等。

