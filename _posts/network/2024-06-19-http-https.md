---
layout: post
title: Http 和 Https 的区别
date:   2024-06-19 00:00:00
categories: 通讯协议
tag: 通讯协议
author: YangLe
---







## 一、HTTP vs HTTPS

HTTP （全称：HyperText Transfer Protocol）

HTTPS（全称：Hypertext Transfer Protocol Secure）

二者都是互联网中用于数据传输的协议。

| 协议       | HTTP     | HTTPS        |
| ---------- | -------- | ------------ |
| 默认端口号 | 80       | 443          |
| 需要整数   | 不需要   | CA 正式      |
| 安全性     | 明文传输 | SSL/TLS 加密 |
| 响应效率   | 快       | 慢           |



HTTP：网络接口(数据链路层) => IP(网络层) => TCP(传输层) => HTTP(应用层)

HTTPS：网络接口(数据链路层) => IP(网络层) => TCP(传输层) => TLS/SSL(安全套接层) => HTTP(应用层)



### HTTP

HTTP 是一种发送和接收 HTML 页面的方法，主要用于 Web 浏览器和网站服务器之间传递信息。主要**特点**如下：

1. **基于请求响应模式**：HTTP 协议采用 客户端-服务端 架构模式，客户端向服务端发生请求，服务器返回相应的响应。这种模式能**有效分离应用逻辑，提高系统的可维护性和扩展性**。
2. **基于文本传输**：HTTP协议使用 ASCII 码作为通信协议，每个请求和响应都是一条文本消息，这使得通信协议更加简单、直观、易于处理。
3. **支持多媒体传输**：HTTP协议可以传输多种类型的数据，如 HTML、XML、JSON、图片、音频、视频等，这使得HTTP协议成为一种通用的网络传输协议，适用于各种不同类型的应用场景
4. **无连接**：HTTP协议没有客户端的状态存储，也没有事务处理的 内存 能力。这意味着每次访问网站时可能需要重复的登录操作。

HTTP协议也存在一些不足之处。由于它以明文方式发送内容，不提供任何方式的数据加密，因此安全性较差。如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息。因此，HTTP协议不适合传输一些敏感信息，比如银行卡号、密码等。



### HTTPS

HTTPS 在 HTTP 的基础上通过**传输加密和身份认证**保证了传输过程的安全性。HTTPS的内容加密、身份验证以及数据完整性保护的原理主要依赖于 SSL/TLS 协议。

#### 内容加密

HTTPS使用对称加密和非对称加密相结合的方式来实现内容加密。

1、**对称加密**：在密钥交换完成后，客户端和服务器会生成一个共享的会话密钥。这个会话密钥用于后续的加密和解密操作。双方使用这个会话密钥，通过对称加密算法（如AES）对传输的数据进行加密和解密，确保数据在传输过程中的安全性。

![图片]({{ '/images/network/对称加密通讯.webp' | prepend: site.baseurl }})

对称加密虽然保证了消息的保密性，但是 因Client和Service 共享一个密钥，这样就导致密钥特别容易泄漏。

2、**非对称加密**：在HTTPS的握手阶段，服务器会将其公钥发生给客户端。这个公钥用于后续的加密通信。客户端使用服务器公钥加密一个随机数，然后将加密后的随机数发送给服务器。服务器使用其私钥解密这个随机数，从而确保双方都能安全的交换密钥，这个过程称为密钥交换。

- 非对称加密需要使用到接收方的公钥对消息进行加密，但是 公钥不保密，可以截获客户端发来的消息，然后篡改形成攻击
- 非对称加密的性能会慢上至少几倍，增加系统消耗。因此，Https 将两种加密结合起来使用

#### 身份验证

HTTPS使用数字证书来验证服务器的身份。

1. **数字证书**：数字证书是由权威的证书颁发机构（CA）颁发的，包含了服务器的公钥、服务器的身份信息以及CA的签名等信息。当客户端与服务器建立HTTPS连接时，服务器会将其数字证书发送给客户端。
2. **验证过程**：客户端收到服务器的数字证书后，会验证证书的合法性。
   - 首先，客户端会检查证书是否由受信任的CA颁发。
   - 然后，客户端会检查证书是否过期以及证书中的服务器身份信息是否与正在连接的服务器一致。
   - 最后，客户端会使用CA的公钥验证证书上的签名，确保证书在传输过程中没有被篡改。如果证书验证通过，客户端就可以确认服务器的身份是可信的

#### 数据完整性

HTTPS通过消息认证码（MAC）来确保数据的完整性。

1. **消息认证码**：在 HTTPS 通信过程中，每个传输的数据包都会附带一个 MAC 值。这个 MAC 值是通过将数据包的内容和会话密钥一起输入到一个哈希函数中计算得出的。因此，只有持有相同会话密钥的接收方才能计算出正确的 MAC 值。
2. **完整性校验**：当接收方收到数据包时，它会使用相同的会话密钥和哈希函数计算MAC值，并与数据包中附带的MAC值进行比较。如果两个MAC值相同，那么接收方就可以确认数据包在传输过程中没有被篡改，从而保证了数据的完整性和安全性。

