---
layout: post
title:  现代企业架构框架白皮书 - 技术架构
date:   2024-05-14 01:00:00
categories: 系统设计
tag: 系统设计
author: YangLe
---



# 企业架构之技术架构

技术架构是对某一技术问题（需求）解决方案的结构化描述，由构成解决方案的组件结构及之间的交互关系构成。

广义上的技术架构是一系列涵盖多类技术问题设计方案的统称，例如：部署方案、存储方案、缓存方案、日志方案等等。

![图片]({{ '/images/design/企业级技术架构元模型.png' | prepend: site.baseurl }})



## 一、元模型综述

技术架构元模型是对技术架构组成要素的抽象建模，用来定义用于结构化描述架构设计的模型元素，技术架构元模型的定义需要满足当今企业数字化建设的实际需要。

### 1、架构模式

模式分析是快速认识问题本质以及经验复用的有效实践，我们在元模型内容中增加了架构模式模型，引入模式分析视角，对上层架构设计意图、问题进行分析建模，目的是快速、准确定位设计和复用技术方案。



### 2、架构方案

架构方案模型是描述技术架构设计的核心元模型，包含3个主要核心元素。基于平台型企业架构技术设计的特征，我们使用了平台、服务、组件这三个层次递进的元素对技术架构进行建模。



### 3、架构策略

架构策略模型是为了约束和规范架构设计过程，保证架构设计遵循企业整体的架构设计愿景与需求，符合企业整体的架构设计原则与规范，是对于架构设计过程本身的约束和指导。



## 二、元模型应用

### 1、架构设计概述

经常遇到的问题：

- 对于架构需求把握不足或者没有架构需求的分析意识，过早的进入架构设计，导致系统复杂度变高甚至过度设计，为开发落地带来额外研发成本
- 架构设计采用的技术和工具过于超前，超出团队成员技术水平，造成落地难度高，新成员上手速度慢，进而对整体进度和实施效果造成影响。
- 架构设计过程时间长，完成后团队就不再愿意对设计方案继续调整和迭代，当技术发展变化很快时，设计完成时方案已经过时



平台型技术架构设计的关键：

- 系统性的分析架构需求
- 结构化的设计架构方案
- 沉淀可复用的架构经验



技术架构元模型的应用：

![图片]({{ '/images/design/技术架构元模型的应用.png' | prepend: site.baseurl }})



### 2、分析架构需求

#### **问题**（Problem）

问题（Problem） 和 上下文（Context） 是对上层架构设计输入的分析和解读。

问题描述了架构需求背后要解决的实际问题是什么。例如：业务中台中如何保证前台获得一致的服务等级承诺（SLA）。

#### **上下文**（Context）

上下文描述了与问题相关的背景信息。例如：问题产生的背景是什么，需要考虑什么样的约束条件，期望达到什么样的效果等等。

#### **模式**（Pattern）

模式是通过对问题和上下文的分析，快速映射到的业界或企业内的最佳实践。

模式是解决某一类问题的方案原理的总结，通过模式 技术人员可以快速构成对问题及方案背后原理的理解，在问题不变时，模式具有相对的稳定性，是沉淀技术知识的最佳形

#### **决策**（Decision）

决策描述了在模式的基础上，引入与具体架构方案设计相关的影响因素后，形成的符合满足架构建设需求的技术类决策，决策的描述方式可以是决策树或决策表。

对决策的建模有助于使企业建立起规范的技术决策管理，规范化决策过程及决策内容，是企业构建可演讲式的架构治理能力的关键。通常决策的影响因素包括来自顶层设计的 IT 技术战略、架构策略、技术选型、跨功能需求、IT实施方法等

#### **实践总结**

通常使用问题、上下文对上层设计意图进行系统性的分析后，得到的问题如果准确，那么它在业界往往已经存在成熟的解决方案模式可以参考。架构式元模型的价值是帮助企业识别和利用已成熟的最佳实践，提高架构设计质量，降低架构设计成本。



### 3、设计架构方案

在复杂的平台型技术架构中，是否能够对架构元素做准确的识别和直观的描述，直接影响架构设计方案是否易于理解、使用和管理。在现实世界中，结构化是我们理解、记忆和描述复杂事物的最佳方式，因此将其应用在架构设计中来增强架构的表现力，因此我们在设计时对元模型的主要考量因素有：

1. 架构元素的职责明确且易于理解
2. 架构元素的职责之间互相正交
3. 架构元素之间存在清晰可辨的层次关系

相对于经典技术架构元素，我们弱化了逻辑、物理上的分类，使用带有明确职责属性的分类方式定义架构元素，同时我们队元素的职责进行了符合平台化特征的重新定义，最终组成轻量的结构化的描述元模型。

![图片]({{ '/images/design/技术架构元模型的应用.png' | prepend: site.baseurl }})



#### 技术组件 Component

技术组件用于描述技术服务的实现，是可部署的物理组件，例如：可运行的软件系统或构建打包后应用组件，技术组件通过架构模式的决策元素，与技术选型进行关联。

技术组件相关的映射示例

| 名称         | 类型     | 技术组件         |
| ------------ | -------- | ---------------- |
| 数据存储     | 技术服务 | MySQL            |
| 销售订单服务 | 应用组件 | OrderService JAR |
| API 网关     | 技术服务 | Zuul             |



#### 技术服务 Service

技术服务用于描述实现上层架构设计意图所需的技术能力（或功能），例如：网关、防火墙、数据存储、缓存等。技术服务属于逻辑类型，作为一种对服务能力的描述，与之相关的SLA等 跨功能性需求会同时作为其参考描述信息。

技术服务的描述示例

| 名称             | XXX网关服务                          |
| ---------------- | ------------------------------------ |
| 描述             | XXX                                  |
| 职责             | XXX                                  |
| 正常运行保证时间 | 99.99%                               |
| 响应时间         | <= 10ms                              |
| 故障处理时间     | 故障等级1 小于24h，故障等级2 小于48h |
| 服务提供者       | XXX技术组件 / XXX云平台              |



#### 技术平台 Platform

技术平台是用于描述由一组技术服务构成，提供解决特定技术领域能力的逻辑模型，它主要用于从更高的层次对技术服务进行管理，简化架构参与者对复杂架构的理解和使用，统一对用户提供一致的SLA服务承诺。

技术平台在架构设计中的典型用途：

1. 技术平台作为技术服务的提供者
   - 例如：微服务架构通常需要多种技术服务提供支撑，在一些企业内部或技术产品中，将其统一归入微服务平台
2. 技术平台作为技术组件部署运行的承载者
   - 例如：当架构中需要描述部署方案时，技术平台可作为对部署载体的描述
   - 例如：提供容器化运行的 PaaS平台
3. 技术平台作为外部服务的提供者
   - 例如：使用 AWS 等云平台提供的技术服务时，架构设计上即可忽略对技术服务支撑的技术组件的描述



#### 实践总结

结构化的架构描述有利于企业从多种视角对架构进行管理和治理，实际架构设计过程中，可以由技术服务为切入点展开高阶设计和详细设计。

首先明确上层架构设计意图中对技术能力的依赖是什么，进而定义出技术服务所需提供的SLA服务承诺等级，结合架构模式中的决策模型选择技术组件的选型。



### 4、沉淀技术知识

技术架构中的复用涉及两个方面：

1. 通过技术组件、平台提供可共享的技术服务
2. 架构设计过程中产生的可重复利用的技术知识



企业架构设计背后是成本的投入，从技术管理的角度，管理者希望一次投入可以在更长的时间里产生更多的价值；从技术设计的角度，架构师希望用更短的时间完成更高质量的架构方案。因此很多企业在技术治理策略中，将技术知识作为重要的技术资产进行管理。

可以将可复用的技术知识对应到三类架构产出物上：

- 模式：解决某类问题的最佳实践，只要问题存在，模式就是稳定不变的，不受使用场景的变化而变化，可以结合领域扩展模型对模式细节展开描述。
- 经验：经验是特定场景中对模式的实例化应用的过程记录，经验可以加快对模式的理解，学习如何结合实际场景应用模式解决问题，经验的内容由架构模式元模型中的问题、上下文、决策三个元素组成，每个元素可以通过定义对应的参考模型展开描述
- 方案：最后是架构设计结果，作为案例供后续参考。
