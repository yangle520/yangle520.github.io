---
layout: post
title:  存储系统
date:   2024-01-15 00:00:00 +0800
categories: 基础知识
tag: 学习
---

## 磁盘知识简介

存储磁盘三大指标：吞吐量、IOPS、时延
吞吐量：网络、设备、端口、虚电路或其他设施，单位时间内成功地传送数据的数量（以比特、字节、分组等测量）
IOPS：（Input/Output Operations Per Second）是一个用于计算机存储设备（如机械硬盘HDD、固态硬盘SSD、混合硬盘HHD或存储区域网络SAN等）性能测试的量测方式，可以视为是每秒的读写次数。
时延：发起读取数据请求到读取到数据之间的时间间隔。

## 存储方式区别

文件、块和对象是三种以不同的方式来保存、整理和呈现数据的存储格式。

| 存储方式     | NAS                                                          | EBS                                                          | OSS                                                          |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **说明**     | 文件存储<br />会以文件和文件夹的层次结构来整理和呈现数据     | 块存储<br />将数据拆分到任意划分且大小相同的卷中             | 对象存储<br />会管理数据并将其链接至关联的元数据             |
| **接口协议** | NFS、SMB协议，支持POSIX接口访问                              | 自研协议 （iSCSI）                                           | HTTP/HTTPS<br />支持AWS的S3接口                              |
| **应用场景** | 存储架构是目录树状结构<br />可以支持上千台虚拟机通过POSIX接口同时、高并发访问，支持随机读写、在线修改、直读直写 | 性能高、时延低，适合于OLTP数据库、NoSQL数据库等IO密集型的高性能、低时延应用工作负载，支持随机读写 | 存储架构为S3<br />扁平化文件组织形式，不支持文件随机读写，主要适用于互联网架构的海量数据的上传下载和分发<br />对象和存储段通过统一资源标识符（URI）进行查找 |



## 协议介绍

协议定义了在两个或多个通信实体之间进行交换的报文格式和次序，以及报文发送和/或接收一条报文或其他事件所采取的行动

### NFS协议

Network File System 网络文件系统

由SUN公司研制的UNIX表示层协议（presentation layer protocol）**文件共享协议**，能使使用者访问网络上别处的文件就像在使用自己的计算机一样。

1、NFS只提供基本的文件处理功能，而**不提供任何四层TCP/IP与OSI七层数据传输功能**，需要借助 RPC 协议才能实现 TCP/IP 数据传输功能

2、NFS 默认没有加密，对客户端来说是完全透明的，且仅依靠 IP 地址或主机名来决定是否允许客户端挂载指定的共享目录【**明文传输**】，需要可通过 Kerberos 进行认证及加密

3、NFS与其他文件共享协议共同点：使用C/S 架构

4、NFS实现原理：共享资源的属主、属组和权限。

5、NFS 服务器和客户端通过 UID 和 GID 来识别共享资源的所有者信息。当客户端挂载 NFS 共享目录时，共享目录中资源的 UID 和 GID 将与服务器上面的保持一致；而客户端会将 UID 和 GID 映射到客户端上所对应的用户名和组名。NFS 服务器与客户端上共享资源的权限及 ACL 信息（若支持）将保持一致。

### **SMB协议**

网络文件共享系统协议、（Server Message Block）  服务器消息块

允许应用程序和终端用户从远端的文件服务器访问文件资源，CIFS（通用互联网文件系统 Common Internet File System）是SMB的衍生协议。

1、SMB与NFS的区别：操作系统OS不同，NFS适配linux操作系统，SMB适配windows/linux，但是兼容linux时相关存储性能会收到影响。

2、SMB协议运用过程：SMB协议协商（Negotiate）> 建立SMB会话（Session Setup）> 连接一个文件分享（Tree Connect）> 文件系统操作 > 断开文件分享连接（Tree Disconnect）>  终止SMB会话（Logoff）

**POSIX协议**

可移植操作系统接口POSIX（Portable Operating System Interface）是IEEE为要在各种UNIX操作系统上运行软件，而定义API的一系列互相关联的标准的总称。

**RESTful API**

RESTful是一种[网络应用程序](https://www.zhihu.com/search?q=网络应用程序&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"article"%2C"sourceId"%3A"644349955"})的设计风格和开发方式，基于HTTP做传输协议，可以使用XML格式定义或JSON格式定义，跟[编程语言](https://www.zhihu.com/search?q=编程语言&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"article"%2C"sourceId"%3A"644349955"})、平台都无关。RESTFUL适用于移动互联网厂商作为业务接口的场景，实现第三方OTT调用移动网络资源的功能，动作类型为新增、变更、删除所调用资源。
